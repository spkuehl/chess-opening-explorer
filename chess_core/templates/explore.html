{% extends "base.html" %}

{% block title %}Explore openings â€“ Chess Explorer{% endblock %}

{% block content %}
<style>
  .form-filters { font-size: 0.85rem; }
</style>
<h1>Explore openings</h1>

{% if validation_error_message %}
<p role="alert">Invalid filters: {{ validation_error_message }} Using defaults.</p>
{% endif %}

<details class="filter-details" open>
  <summary>Filters</summary>
  <form
    method="get"
    action="{% url 'explore' %}"
    hx-get="{% url 'explore' %}"
    hx-target="#opening-stats-results"
    hx-swap="innerHTML"
    hx-trigger="input delay:200ms from:form"
  >
    <fieldset class="grid" style="--pico-grid-columns: 2">
      <p>
        <label class="form-filters" for="eco_code">ECO code</label>
        <input class="form-filters" type="text" name="eco_code" id="eco_code" value="{{ form_data.eco_code|default:'' }}" placeholder="e.g. B20">
      </p>
      <p>
        <label class="form-filters" for="opening_name">Opening name</label>
        <input class="form-filters" type="text" name="opening_name" id="opening_name" value="{{ form_data.opening_name|default:'' }}" placeholder="e.g. Queen's Gambit">
      </p>
      <p>
        <label class="form-filters" for="date_from">Date from</label>
        <input class="form-filters" type="date" name="date_from" id="date_from" value="{{ form_data.date_from|default:'' }}">
      </p>
      <p>
        <label class="form-filters" for="date_to">Date to</label>
        <input class="form-filters" type="date" name="date_to" id="date_to" value="{{ form_data.date_to|default:'' }}">
      </p>
      <p>
        <label class="form-filters" for="threshold">Min games</label>
        <input class="form-filters" type="number" name="threshold" id="threshold" value="{{ form_data.threshold|default:'10' }}" min="1">
      <p>
        <label class="form-filters" for="opening_threshold">Min ply <small>(half moves)</small></label>
        <input class="form-filters" type="number" name="opening_threshold" id="opening_threshold" value="{{ form_data.opening_threshold|default:'3' }}" min="1" placeholder="3">
      </p>
    </fieldset>
  </form>
</details>

<div id="opening-stats-results">
  {% include "partials/opening_stats_table.html" with stats=stats total=total sort_urls=sort_urls column_links=column_links current_sort_by=current_sort_by current_order=current_order pagination=pagination %}
</div>
{% endblock %}
